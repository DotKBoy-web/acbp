{
  "$schema": "./docs/schema/v0/acbp.schema.json",
  "$id": "https://dotkboy.github.io/acbp/models/clinic_visit.v0.json",
  "dsl_version": "v0",
  "name": "inpatient_admission",
  "flags": ["booked","checked_in","in_icu","discharged","expired","transferred"],
  "categories": {
    "admission_type": ["Elective","Emergency","Transfer"],
    "site": ["Main","Annex"],
    "age_group": ["Adult","Peds"],
    "ward": ["Medical","Surgical","ICU","StepDown"],
    "payer": ["SelfPay","Private","Public"],
    "arrival_source": ["ED","Clinic","Transfer","Direct"],
    "admit_hour": ["00:00","04:00","08:00","12:00","16:00","20:00"],
    "weekday": ["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]
  },
  "constraints": [
    {"type":"IMPLIES","a":"checked_in","b":"booked"},
    {"type":"IMPLIES","a":"discharged","b":"checked_in"},
    {"type":"MUTEX","a":"discharged","b":"expired"},
    {"type":"MUTEX","a":"discharged","b":"transferred"},
    {"type":"MUTEX","a":"expired","b":"transferred"},

    {"type":"FORBID_WHEN","if_flag":"booked","when":{"admission_type":"Emergency"}},
    {"type":"FORBID_WHEN","if_flag":"in_icu","when":{"ward":"Medical"}},
    {"type":"FORBID_WHEN","if_flag":"in_icu","when":{"ward":"Surgical"}},
    {"type":"FORBID_WHEN","if_flag":"in_icu","when":{"ward":"StepDown"}},
    {"type":"FORBID_WHEN","if_flag":"discharged","when":{"arrival_source":"Transfer"}}
  ],
  "enumeration_limit_bits": 22
}
